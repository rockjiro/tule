<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tule</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
	<style>
		@import url('https://fonts.googleapis.com/css?family=Joti+One|Kite+One|Raleway');
	</style>
	<link href="https://fonts.googleapis.com/earlyaccess/roundedmplus1c.css" rel="stylesheet" />
	<script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript">
		$(function(){
			$("#input-field").focus();
			var count = <%= @count %>;
			
			// 入力項目上でShift + Enterキー押下時の処理
			$("#input-field").keypress(function(e){
				if (event.shiftKey){
					if(e.which == 13){
						count++;
						var inputStr = $(this).val();
						inputStr = inputStr.replace(/\r?\n/g, '<br>');
						var randnum = -5 + Math.floor( Math.random() * 10 );
						$("#memo-list").append("<div class='memo' id='memo"+ count +"' style='-webkit-transform:rotate(" + randnum + "deg);'><span class='tape'></span><p>"+ inputStr +"</p></div>");
						$(this).val("");
						return false;
					}
				}
			})

			$(document).on("mouseup",".memo",function(e){
				if(e.which == 3){
					if($(this).hasClass("select")){
						$(this).removeClass("select");
						$(this).children(".destroy-btn").hide();
					}else{
						$(this).addClass("select");
						$(this).children(".destroy-btn").show();
					}
					return false;
				}
			})

			$(".input-show").click(function(){
				$(this).hide();
				$("#input-area").show();
			})

			$(document).on("contextmenu",function(){
				return false;
			})
		})
	</script>
</head>
<body>

<%= yield %>

</body>
</html>
